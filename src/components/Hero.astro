---
import { getLocale } from '~/utils/i18n'
import SocialMediaStrip from './SocialMediaStrip.astro'
import OnboardingCarousel from './OnboardingCarousel.astro'

const locale = getLocale(Astro)
---

<header
  id="header"
  class="flex w-full flex-col items-center gap-6 py-16 text-center lg:gap-12 lg:py-32"
>
  <!-- Onboarding Carousel -->
  <div class="w-full" style="transform: translateY(20px); opacity: 0.001; filter: blur(4px)">
    <OnboardingCarousel />
  </div>

  <!-- Social Media Links (Hidden) -->
  <!-- <SocialMediaStrip style="transform: translateY(20px); opacity: 0.001; filter: blur(4px)" /> -->
</header>

<script>
  import { animate, onScroll, stagger } from 'animejs'

  function initAnimations() {
    const debug = false

    const elements = document.querySelectorAll('#header > div:first-child, #header ul')

    animate(elements, {
      // @ts-expect-error - element is HTMLElement
      opacity: element => {
        if (element.tagName === 'UL') {
          return { from: 0.001, to: 0.8 }
        }
        return { from: 0.001, to: 1 }
      },
      translateY: { from: 20, to: 0 },
      filter: { from: 'blur(4px)', to: 'blur(0px)' },
      duration: 300,
      delay: stagger(150),
      ease: 'cubicBezier(0.25, 0.1, 0.25, 1)',
      autoplay: onScroll({
        target: '#header',
        debug,
      }),
    })
  }
  initAnimations()
</script>
